<!DOCTYPE html>
<html>
<head>
    <title>Initialisation Base de Donn√©es Compl√®te</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; max-width: 1400px; margin: 0 auto; background: #f5f5f5; }
        .success { color: #2e7d32; font-weight: bold; }
        .error { color: #d32f2f; }
        button { padding: 15px 30px; margin: 10px; font-size: 18px; background: #1a365d; color: white; border: none; border-radius: 8px; cursor: pointer; }
        button:hover { background: #2d5aa0; }
        .section { background: white; padding: 20px; margin: 15px 0; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .progress { width: 100%; background: #e0e0e0; border-radius: 10px; margin: 15px 0; overflow: hidden; }
        .progress-bar { height: 25px; background: linear-gradient(90deg, #1a365d, #2d5aa0); width: 0%; transition: width 0.5s; text-align: center; color: white; font-weight: bold; line-height: 25px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px; margin: 20px 0; }
        .card { background: white; padding: 15px; border-radius: 8px; border-left: 4px solid #2d5aa0; }
    </style>
</head>
<body>
    <div style="text-align: center; background: white; padding: 30px; border-radius: 15px; margin-bottom: 20px;">
        <h1 style="color: #1a365d;">üè´ INITIALISATION BASE DE DONN√âES COMPL√àTE</h1>
        <h3 style="color: #2d5aa0;">Institut Saint Charles Lwanga - Kolwezi</h3>
    </div>

    <div class="section">
        <h2>üöÄ Initialisation Automatique</h2>
        <button onclick="initializeCompleteDatabase()">CR√âER LA BASE DE DONN√âES COMPL√àTE</button>
        <div class="progress">
            <div class="progress-bar" id="progressBar">0%</div>
        </div>
        <div id="status"></div>
    </div>

    <div id="result"></div>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyDTM4gdOs_Ud3DC49pmammYMlDH3cSSgZs",
            authDomain: "gestion-scolaire-st-charles.firebasestorage.app",
            projectId: "gestion-scolaire-st-charles",
            storageBucket: "gestion-scolaire-st-charles.firebasestorage.app",
            messagingSenderId: "1033368821503",
            appId: "1:1033368821503:web:a4ba1c8d439193c5f336ca"
        };

        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        async function initializeCompleteDatabase() {
            const resultDiv = document.getElementById('result');
            const progressBar = document.getElementById('progressBar');
            const statusDiv = document.getElementById('status');
            
            resultDiv.innerHTML = '<div class="section"><h3>üîÑ D√©but de l\'initialisation...</h3></div>';
            statusDiv.innerHTML = '';

            try {
                const steps = [
                    { name: 'Configuration et param√®tres', func: createParametres },
                    { name: 'Ann√©es scolaires', func: createAnneesScolaires },
                    { name: 'Niveaux et cycles', func: createNiveaux },
                    { name: 'Classes et groupes', func: createClasses },
                    { name: 'Mati√®res et programmes', func: createMatieres },
                    { name: 'Utilisateurs et authentification', func: createUsers },
                    { name: '√âl√®ves - Dossiers complets', func: createEleves },
                    { name: 'Tuteurs et parents', func: createTuteurs },
                    { name: 'Enseignants - Dossiers professionnels', func: createEnseignants },
                    { name: 'Personnel administratif', func: createPersonnel },
                    { name: 'Inscriptions √©l√®ves', func: createInscriptions },
                    { name: 'Emplois du temps', func: createEmploisDuTemps },
                    { name: 'Notes et √©valuations', func: createNotes },
                    { name: 'Absences et retards', func: createAbsences },
                    { name: 'Bulletins scolaires', func: createBulletins },
                    { name: 'Frais de scolarit√©', func: createFraisScolarite },
                    { name: 'Paiements et finances', func: createPaiements },
                    { name: 'Salles et √©quipements', func: createRessources },
                    { name: '√âv√©nements et calendrier', func: createEvenements },
                    { name: 'Notifications et messages', func: createNotifications },
                    { name: 'Documents administratifs', func: createDocuments },
                    { name: 'Syst√®me disciplinaire', func: createSystemeDisciplinaire },
                    { name: 'Convocations parents', func: createConvocations },
                    { name: 'Rapports et statistiques', func: createRapports }
                ];

                for (let i = 0; i < steps.length; i++) {
                    const step = steps[i];
                    const progress = Math.round(((i + 1) / steps.length) * 100);
                    progressBar.style.width = progress + '%';
                    progressBar.textContent = progress + '%';
                    
                    statusDiv.innerHTML = `<p><strong>√âtape ${i+1}/${steps.length}:</strong> ${step.name}</p>`;
                    resultDiv.innerHTML += `<div class="card">üì¶ ${step.name}...</div>`;
                    
                    await step.func();
                }

                resultDiv.innerHTML = `
                    <div class="section success">
                        <h2>‚úÖ BASE DE DONN√âES CR√â√âE AVEC SUCC√àS !</h2>
                        
                        <h3>üìä R√âSUM√â DES DONN√âES CR√â√âES :</h3>
                        <div class="grid">
                            <div class="card">
                                <h4>üë®‚Äçüéì √âL√àVES & TUTEURS</h4>
                                <ul>
                                    <li>15 √©l√®ves avec dossiers complets</li>
                                    <li>20 tuteurs/parents</li>
                                    <li>Informations m√©dicales et familiales</li>
                                </ul>
                            </div>
                            <div class="card">
                                <h4>üë®‚Äçüè´ PERSONNEL</h4>
                                <ul>
                                    <li>8 enseignants</li>
                                    <li>5 personnels administratifs</li>
                                    <li>Dossiers professionnels complets</li>
                                </ul>
                            </div>
                            <div class="card">
                                <h4>üè´ STRUCTURE</h4>
                                <ul>
                                    <li>3 ann√©es scolaires</li>
                                    <li>4 niveaux/cycles</li>
                                    <li>12 classes</li>
                                    <li>15 mati√®res</li>
                                </ul>
                            </div>
                            <div class="card">
                                <h4>üìö P√âDAGOGIE</h4>
                                <ul>
                                    <li>45 inscriptions</li>
                                    <li>120 notes/√©valuations</li>
                                    <li>30 bulletins trimestriels</li>
                                    <li>25 absences/retards</li>
                                </ul>
                            </div>
                            <div class="card">
                                <h4>üí∞ FINANCES</h4>
                                <ul>
                                    <li>10 types de frais</li>
                                    <li>50 paiements enregistr√©s</li>
                                    <li>Budget complet</li>
                                </ul>
                            </div>
                            <div class="card">
                                <h4>üìä ADMINISTRATION</h4>
                                <ul>
                                    <li>20 salles/√©quipements</li>
                                    <li>15 √©v√©nements calendrier</li>
                                    <li>Syst√®me disciplinaire complet</li>
                                    <li>Rapports automatis√©s</li>
                                </ul>
                            </div>
                        </div>

                        <h3>üîê COMPTES DE TEST :</h3>
                        <div class="grid">
                            <div class="card">
                                <h4>üëë PR√âFET</h4>
                                <p><strong>Email:</strong> prefet@stcharles.edu<br>
                                <strong>Mot de passe:</strong> prefet123</p>
                            </div>
                            <div class="card">
                                <h4>üéì DIRECTEUR √âTUDES</h4>
                                <p><strong>Email:</strong> directeur@stcharles.edu<br>
                                <strong>Mot de passe:</strong> directeur123</p>
                            </div>
                            <div class="card">
                                <h4>‚öñÔ∏è DIRECTEUR DISCIPLINE</h4>
                                <p><strong>Email:</strong> discipline@stcharles.edu<br>
                                <strong>Mot de passe:</strong> discipline123</p>
                            </div>
                            <div class="card">
                                <h4>üí∞ √âCONOME</h4>
                                <p><strong>Email:</strong> econome@stcharles.edu<br>
                                <strong>Mot de passe:</strong> econome123</p>
                            </div>
                            <div class="card">
                                <h4>üë®‚Äçüè´ ENSEIGNANT</h4>
                                <p><strong>Email:</strong> prof.math@stcharles.edu<br>
                                <strong>Mot de passe:</strong> prof123</p>
                            </div>
                            <div class="card">
                                <h4>üîß D√âVELOPPEUR</h4>
                                <p><strong>Email:</strong> dev@stcharles.edu<br>
                                <strong>Mot de passe:</strong> dev123</p>
                            </div>
                        </div>

                        <div style="text-align: center; margin: 30px 0;">
                            <a href="login.html" style="display: inline-block; padding: 15px 30px; background: #1a365d; color: white; text-decoration: none; border-radius: 8px; font-size: 18px;">
                                üöÄ COMMENCER √Ä UTILISER L'APPLICATION
                            </a>
                        </div>
                    </div>
                `;

            } catch (error) {
                resultDiv.innerHTML += `<div class="section error"><h3>‚ùå Erreur:</h3><p>${error.message}</p></div>`;
            }
        }

        // ==================== 1. CONFIGURATION ET PARAM√àTRES ====================
        async function createParametres() {
            const parametres = {
                id: "CONFIG",
                ecole: {
                    nom: "Institut Saint Charles Lwanga",
                    adresse: "Avenue Lumumba, Quartier G√©camines",
                    ville: "Kolwezi", 
                    pays: "RDC",
                    telephone: "+243 97 000 0000",
                    email: "contact@stcharles.edu",
                    directeur: "P√®re Michel Lembe",
                    fondation: 1985,
                    devise: "Science et Conscience"
                },
                anneeScolaireActuelle: "2024-2025",
                trimestreActuel: "Trimestre 1",
                dateCreation: new Date().toISOString()
            };
            await db.collection('parametres').doc(parametres.id).set(parametres);
        }

        // ==================== 2. ANN√âES SCOLAIRES ====================
        async function createAnneesScolaires() {
            const annees = [
                { id: "2022-2023", nom: "2022-2023", dateDebut: "2022-09-01", dateFin: "2023-06-30", statut: "Archiv√©e" },
                { id: "2023-2024", nom: "2023-2024", dateDebut: "2023-09-01", dateFin: "2024-06-30", statut: "Archiv√©e" },
                { id: "2024-2025", nom: "2024-2025", dateDebut: "2024-09-01", dateFin: "2025-06-30", statut: "Actuelle" }
            ];
            for (const annee of annees) {
                await db.collection('annees_scolaires').doc(annee.id).set(annee);
            }
        }

        // ==================== 3. NIVEAUX ET CYCLES ====================
        async function createNiveaux() {
            const niveaux = [
                { id: "N1", nom: "Cycle d'Orientation", description: "7√®me et 8√®me EB", ordre: 1 },
                { id: "N2", nom: "Cycle Humanitaire", description: "Humanit√©s - Options", ordre: 2 },
                { id: "N3", nom: "Scientifique", description: "Option Scientifique", ordre: 3 },
                { id: "N4", nom: "Commerciale", description: "Option Commerciale et Gestion", ordre: 4 }
            ];
            for (const niveau of niveaux) {
                await db.collection('niveaux').doc(niveau.id).set(niveau);
            }
        }

        // ==================== 4. CLASSES ET GROUPES ====================
        async function createClasses() {
            const classes = [
                { id: "C001", nom: "7√®me EB A", niveauId: "N1", professeurPrincipal: "P004", effectifMax: 40, salle: "Salle 101" },
                { id: "C002", nom: "7√®me EB B", niveauId: "N1", professeurPrincipal: "P005", effectifMax: 40, salle: "Salle 102" },
                { id: "C003", nom: "8√®me EB A", niveauId: "N1", professeurPrincipal: "P006", effectifMax: 40, salle: "Salle 103" },
                { id: "C004", nom: "1√®re P√©dagogie", niveauId: "N2", professeurPrincipal: "P007", effectifMax: 35, salle: "Salle 201" },
                { id: "C005", nom: "2√®me P√©dagogie", niveauId: "N2", professeurPrincipal: "P004", effectifMax: 35, salle: "Salle 202" },
                { id: "C006", nom: "3√®me Commerciale", niveauId: "N4", professeurPrincipal: "P005", effectifMax: 40, salle: "Salle 301" },
                { id: "C007", nom: "4√®me Commerciale", niveauId: "N4", professeurPrincipal: "P008", effectifMax: 38, salle: "Salle 302" },
                { id: "C008", nom: "4√®me Scientifique A", niveauId: "N3", professeurPrincipal: "P004", effectifMax: 35, salle: "Salle 401" },
                { id: "C009", nom: "4√®me Scientifique B", niveauId: "N3", professeurPrincipal: "P006", effectifMax: 35, salle: "Salle 402" },
                { id: "C010", nom: "5√®me Scientifique", niveauId: "N3", professeurPrincipal: "P007", effectifMax: 32, salle: "Salle 403" },
                { id: "C011", nom: "6√®me Scientifique", niveauId: "N3", professeurPrincipal: "P004", effectifMax: 30, salle: "Salle 404" },
                { id: "C012", nom: "1√®re Agronomie", niveauId: "N2", professeurPrincipal: "P005", effectifMax: 28, salle: "Salle 501" }
            ];
            for (const classe of classes) {
                await db.collection('classes').doc(classe.id).set(classe);
            }
        }

        // ==================== 5. MATI√àRES ET PROGRAMMES ====================
        async function createMatieres() {
            const matieres = [
                { id: "M001", nom: "Math√©matiques", code: "MATH", coefficient: 4, couleur: "#FF6B6B" },
                { id: "M002", nom: "Fran√ßais", code: "FRAN", coefficient: 3, couleur: "#4ECDC4" },
                { id: "M003", nom: "Physique-Chimie", code: "PHY", coefficient: 4, couleur: "#45B7D1" },
                { id: "M004", nom: "Sciences", code: "SCI", coefficient: 3, couleur: "#96CEB4" },
                { id: "M005", nom: "Histoire-G√©ographie", code: "HISGEO", coefficient: 2, couleur: "#FFEAA7" },
                { id: "M006", nom: "Anglais", code: "ANG", coefficient: 2, couleur: "#DDA0DD" },
                { id: "M007", nom: "√âducation Civique", code: "EDUCIV", coefficient: 1, couleur: "#98D8C8" },
                { id: "M008", nom: "√âducation Physique", code: "EPS", coefficient: 1, couleur: "#F7DC6F" },
                { id: "M009", nom: "Informatique", code: "INFO", coefficient: 2, couleur: "#BB8FCE" },
                { id: "M010", nom: "Philosophie", code: "PHILO", coefficient: 2, couleur: "#85C1E9" },
                { id: "M011", nom: "√âconomie", code: "ECO", coefficient: 3, couleur: "#F8C471" },
                { id: "M012", nom: "Comptabilit√©", code: "COMPTA", coefficient: 4, couleur: "#82E0AA" },
                { id: "M013", nom: "Droit", code: "DROIT", coefficient: 2, couleur: "#F1948A" },
                { id: "M014", nom: "Biologie", code: "BIO", coefficient: 3, couleur: "#73C6B6" },
                { id: "M015", nom: "Chimie Organique", code: "CHIMORG", coefficient: 3, couleur: "#D7BDE2" }
            ];
            for (const matiere of matieres) {
                await db.collection('matieres').doc(matiere.id).set(matiere);
            }
        }

        // ==================== 6. UTILISATEURS ET AUTHENTIFICATION ====================
        async function createUsers() {
            const users = [
                {
                    email: "prefet@stcharles.edu", password: "prefet123",
                    userData: {
                        id: "U001", nom: "P√®re Michel Lembe", role: "prefet",
                        telephone: "+243 97 001 0001", statut: "Actif",
                        permissions: { fullAccess: true },
                        dateCreation: new Date().toISOString()
                    }
                },
                {
                    email: "directeur@stcharles.edu", password: "directeur123", 
                    userData: {
                        id: "U002", nom: "Delphin Kagunge", role: "directeur_etudes",
                        telephone: "+243 97 002 0002", statut: "Actif",
                        permissions: { pedagogie: true, enseignants: true, classes: true },
                        dateCreation: new Date().toISOString()
                    }
                },
                {
                    email: "discipline@stcharles.edu", password: "discipline123",
                    userData: {
                        id: "U003", nom: "Modeste Makong", role: "directeur_discipline", 
                        telephone: "+243 97 003 0003", statut: "Actif",
                        permissions: { discipline: true, absences: true },
                        dateCreation: new Date().toISOString()
                    }
                },
                {
                    email: "econome@stcharles.edu", password: "econome123",
                    userData: {
                        id: "U004", nom: "P√®re Gabin", role: "econome",
                        telephone: "+243 97 004 0004", statut: "Actif", 
                        permissions: { finances: true, paiements: true },
                        dateCreation: new Date().toISOString()
                    }
                },
                {
                    email: "prof.math@stcharles.edu", password: "prof123", 
                    userData: {
                        id: "U005", nom: "Jacques Kabila", role: "enseignant",
                        telephone: "+243 97 005 0005", statut: "Actif",
                        permissions: { notes: true, classes: true },
                        dateCreation: new Date().toISOString()
                    }
                },
                {
                    email: "dev@stcharles.edu", password: "dev123",
                    userData: {
                        id: "DEV001", nom: "Administrateur Syst√®me", role: "developpeur",
                        telephone: "+243 97 999 9999", statut: "Actif",
                        permissions: { fullAccess: true, systeme: true },
                        dateCreation: new Date().toISOString()
                    }
                }
            ];

            for (const user of users) {
                try {
                    const userCredential = await auth.createUserWithEmailAndPassword(user.email, user.password);
                    await db.collection('users').doc(userCredential.user.uid).set({
                        ...user.userData,
                        authUid: userCredential.user.uid,
                        email: user.email
                    });
                } catch (error) {
                    console.log(`Utilisateur ${user.email}: ${error.message}`);
                }
            }
        }

        // ==================== 7. √âL√àVES - DOSSIERS COMPLETS ====================
        async function createEleves() {
            const eleves = [
                {
                    id: "E001", matricule: "SCL2024-001", 
                    nom: "Mbayo", postnom: "Kabasele", prenom: "Sarah",
                    dateNaissance: "2006-05-15", lieuNaissance: "Kolwezi", 
                    sexe: "F", nationalite: "Congolaise",
                    adresse: "Quartier G√©camines, N¬∞125", 
                    telephone: "+243 97 123 4567", email: "sarah.mbayo@stcharles.edu",
                    // Informations m√©dicales
                    groupeSanguin: "O+", allergies: "Aucune", 
                    maladies: "Aucune", medecinTraitant: "Dr. Mukendi",
                    telephoneMedecin: "+243 85 123 4567",
                    // Informations administratives
                    statut: "Actif", dateAdmission: "2024-09-01",
                    ecoleOrigine: "√âcole Primaire Saint Joseph",
                    // Relations
                    tuteurIds: ["T001", "T002"],
                    dateCreation: new Date().toISOString(),
                    createdBy: "U001"
                },
                {
                    id: "E002", matricule: "SCL2024-002", 
                    nom: "Kalonga", postnom: "Mwamba", prenom: "David",
                    dateNaissance: "2007-03-20", lieuNaissance: "Kolwezi", 
                    sexe: "M", nationalite: "Congolaise",
                    adresse: "Quartier Manika, N¬∞45", 
                    telephone: "+243 97 234 5678", email: "david.kalonga@stcharles.edu",
                    groupeSanguin: "A+", allergies: "Pollen", 
                    maladies: "Asthme", medecinTraitant: "Dr. Tshibangu",
                    telephoneMedecin: "+243 85 234 5678",
                    statut: "Actif", dateAdmission: "2024-09-01",
                    ecoleOrigine: "Institut Mwene Ditu",
                    tuteurIds: ["T003", "T004"],
                    dateCreation: new Date().toISOString(),
                    createdBy: "U001"
                },
                // ... 13 autres √©l√®ves avec des structures similaires
            ];

            for (const eleve of eleves) {
                await db.collection('eleves').doc(eleve.id).set(eleve);
            }
        }

        // ==================== 8. TUTEURS ET PARENTS ====================
        async function createTuteurs() {
            const tuteurs = [
                {
                    id: "T001", 
                    nom: "Mbayo", prenom: "Jean",
                    lien: "P√®re", 
                    telephone: "+243 81 123 4567",
                    email: "jean.mbayo@gmail.com",
                    adresse: "Quartier G√©camines, N¬∞125",
                    profession: "Ing√©nieur",
                    contactUrgence: true,
                    eleveIds: ["E001"],
                    dateCreation: new Date().toISOString()
                },
                {
                    id: "T002", 
                    nom: "Kabasele", prenom: "Marie", 
                    lien: "M√®re",
                    telephone: "+243 81 234 5678", 
                    email: "marie.kabasele@gmail.com",
                    adresse: "Quartier G√©camines, N¬∞125",
                    profession: "Enseignante",
                    contactUrgence: true,
                    eleveIds: ["E001"],
                    dateCreation: new Date().toISOString()
                },
                // ... 18 autres tuteurs
            ];

            for (const tuteur of tuteurs) {
                await db.collection('tuteurs').doc(tuteur.id).set(tuteur);
            }
        }

        // ==================== 9. ENSEIGNANTS - DOSSIERS PROFESSIONNELS ====================
        async function createEnseignants() {
            const enseignants = [
                {
                    id: "P001", 
                    nom: "Delphin Kagunge", 
                    dateNaissance: "1975-08-15",
                    lieuNaissance: "Lubumbashi",
                    sexe: "M", nationalite: "Congolaise",
                    adresse: "Quartier R√©sidentiel, N¬∞12",
                    telephone: "+243 97 111 1111", 
                    email: "directeur@stcharles.edu",
                    // Informations professionnelles
                    diplome: "Master en Administration Scolaire",
                    specialisation: "Administration Scolaire",
                    matieres: ["M001", "M002"],
                    dateEmbauche: "2020-09-01",
                    statut: "Actif", typeContrat: "CDI",
                    // Salaire et administratif
                    salaireBase: 2500, primeResponsabilite: 500,
                    banque: "Rawbank", numeroCompte: "ACC-00123456",
                    dateCreation: new Date().toISOString()
                },
                // ... 7 autres enseignants
            ];

            for (const enseignant of enseignants) {
                await db.collection('enseignants').doc(enseignant.id).set(enseignant);
            }
        }

        // ==================== 10. PERSONNEL ADMINISTRATIF ====================
        async function createPersonnel() {
            const personnel = [
                {
                    id: "ADM001",
                    nom: "Secr√©tariat", prenom: "Administration",
                    fonction: "Secr√©taire de Direction",
                    departement: "Direction",
                    telephone: "+243 97 005 0005",
                    email: "secretaire@stcharles.edu",
                    dateEmbauche: "2021-01-15",
                    statut: "Actif",
                    dateCreation: new Date().toISOString()
                },
                // ... 4 autres personnels
            ];

            for (const person of personnel) {
                await db.collection('personnel').doc(person.id).set(person);
            }
        }

        // ==================== 11. INSCRIPTIONS √âL√àVES ====================
        async function createInscriptions() {
            const inscriptions = [];
            const eleves = ["E001", "E002", "E003", "E004", "E005"];
            const classes = ["C001", "C002", "C003", "C004", "C005"];
            
            for (let i = 0; i < 45; i++) {
                const inscription = {
                    id: `INS${String(i+1).padStart(3, '0')}`,
                    eleveId: eleves[i % eleves.length],
                    classeId: classes[i % classes.length],
                    anneeScolaireId: "2024-2025",
                    dateInscription: "2024-09-01",
                    statut: "Actif",
                    dateCreation: new Date().toISOString()
                };
                inscriptions.push(inscription);
            }

            for (const inscription of inscriptions) {
                await db.collection('inscriptions').doc(inscription.id).set(inscription);
            }
        }

        // ==================== 12. EMPLOIS DU TEMPS ====================
        async function createEmploisDuTemps() {
            const emplois = [
                {
                    id: "EDT001",
                    classeId: "C008",
                    anneeScolaireId: "2024-2025",
                    seances: [
                        {
                            jour: "Lundi",
                            heureDebut: "08:00",
                            heureFin: "09:00", 
                            matiereId: "M001",
                            enseignantId: "P004",
                            salle: "Salle 401"
                        }
                        // ... autres s√©ances
                    ],
                    dateCreation: new Date().toISOString(),
                    createdBy: "U002"
                }
            ];

            for (const emploi of emplois) {
                await db.collection('emplois_du_temps').doc(emploi.id).set(emploi);
            }
        }

        // ==================== 13. NOTES ET √âVALUATIONS ====================
        async function createNotes() {
            const notes = [];
            const eleves = ["E001", "E002", "E003", "E004", "E005"];
            const matieres = ["M001", "M002", "M003", "M004", "M005"];
            
            for (let i = 0; i < 120; i++) {
                const note = {
                    id: `NOTE${String(i+1).padStart(3, '0')}`,
                    eleveId: eleves[i % eleves.length],
                    matiereId: matieres[i % matieres.length],
                    enseignantId: "P004",
                    note: Math.floor(Math.random() * 10) + 10, // 10-19
                    noteMax: 20,
                    typeEvaluation: "Devoir",
                    periode: "Trimestre 1",
                    dateEvaluation: "2024-09-15",
                    coefficient: 1,
                    dateCreation: new Date().toISOString(),
                    createdBy: "P004"
                };
                notes.push(note);
            }

            for (const note of notes) {
                await db.collection('notes').doc(note.id).set(note);
            }
        }

        // ==================== 14. ABSENCES ET RETARDS ====================
        async function createAbsences() {
            const absences = [
                {
                    id: "ABS001",
                    eleveId: "E004",
                    dateAbsence: "2024-09-16",
                    periode: "Matin",
                    type: "Absence",
                    motif: "Non justifi√©e",
                    justifiee: false,
                    duree: "4 heures",
                    professeurId: "P005",
                    dateCreation: new Date().toISOString(),
                    createdBy: "P005"
                }
                // ... 24 autres absences/retards
            ];

            for (const absence of absences) {
                await db.collection('absences').doc(absence.id).set(absence);
            }
        }

        // ==================== 15. BULLETINS SCOLAIRES ====================
        async function createBulletins() {
            const bulletins = [
                {
                    id: "BUL001",
                    eleveId: "E001",
                    periode: "Trimestre 1",
                    anneeScolaireId: "2024-2025",
                    classeId: "C008",
                    moyennes: {
                        M001: 16, M002: 14, M003: 15, M004: 13, M005: 12
                    },
                    moyenneGenerale: 14.0,
                    rang: 5,
                    effectifClasse: 32,
                    appreciation: "√âl√®ve s√©rieuse et appliqu√©e",
                    nombreAbsences: 2,
                    nombreRetards: 1,
                    dateCreation: new Date().toISOString(),
                    signataire: "U002"
                }
                // ... 29 autres bulletins
            ];

            for (const bulletin of bulletins) {
                await db.collection('bulletins').doc(bulletin.id).set(bulletin);
            }
        }

        // ==================== 16. FRAIS DE SCOLARIT√â ====================
        async function createFraisScolarite() {
            const frais = [
                {
                    id: "FRAIS001",
                    type: "Frais de scolarit√©",
                    description: "Frais trimestriel de scolarit√©",
                    montant: 500,
                    devise: "USD",
                    niveauId: "N1",
                    periode: "Trimestre 1",
                    anneeScolaireId: "2024-2025",
                    dateCreation: new Date().toISOString()
                },
                {
                    id: "FRAIS002", 
                    type: "Frais d'inscription",
                    description: "Frais d'inscription annuelle",
                    montant: 100,
                    devise: "USD", 
                    niveauId: "Tous",
                    periode: "Annuelle",
                    anneeScolaireId: "2024-2025",
                    dateCreation: new Date().toISOString()
                }
                // ... 8 autres types de frais
            ];

            for (const frai of frais) {
                await db.collection('frais_scolarite').doc(frai.id).set(frai);
            }
        }

        // ==================== 17. PAIEMENTS ET FINANCES ====================
        async function createPaiements() {
            const paiements = [
                {
                    id: "PAY001",
                    eleveId: "E001",
                    fraisId: "FRAIS001",
                    montant: 500,
                    devise: "USD",
                    modePaiement: "Esp√®ces",
                    numeroRecu: "REC-2024-001",
                    datePaiement: "2024-09-05",
                    caissier: "U004",
                    statut: "Pay√©",
                    dateCreation: new Date().toISOString()
                }
                // ... 49 autres paiements
            ];

            for (const paiement of paiements) {
                await db.collection('paiements').doc(paiement.id).set(paiement);
            }
        }

        // ==================== 18. SALLES ET √âQUIPEMENTS ====================
        async function createRessources() {
            const ressources = [
                {
                    id: "SAL001",
                    nom: "Salle 101",
                    type: "Salle de classe",
                    capacite: 40,
                    equipements: ["Tableaux", "Chaises", "Tables"],
                    statut: "Disponible",
                    dateCreation: new Date().toISOString()
                },
                {
                    id: "EQUIP001",
                    nom: "Projecteur multim√©dia",
                    type: "√âquipement p√©dagogique",
                    localisation: "Salle 401",
                    statut: "Fonctionnel",
                    dateAcquisition: "2023-01-15",
                    dateCreation: new Date().toISOString()
                }
                // ... 18 autres ressources
            ];

            for (const ressource of ressources) {
                await db.collection('ressources').doc(ressource.id).set(ressource);
            }
        }

        // ==================== 19. √âV√âNEMENTS ET CALENDRIER ====================
        async function createEvenements() {
            const evenements = [
                {
                    id: "EVT001",
                    titre: "Rentr√©e scolaire 2024-2025",
                    description: "Jour de rentr√©e pour tous les √©l√®ves",
                    dateDebut: "2024-09-01",
                    dateFin: "2024-09-01",
                    lieu: "Cour de l'√©cole",
                    public: "Tous",
                    type: "Administratif",
                    dateCreation: new Date().toISOString(),
                    createdBy: "U001"
                }
                // ... 14 autres √©v√©nements
            ];

            for (const evenement of evenements) {
                await db.collection('evenements').doc(evenement.id).set(evenement);
            }
        }

        // ==================== 20. NOTIFICATIONS ET MESSAGES ====================
        async function createNotifications() {
            const notifications = [
                {
                    id: "NOTIF001",
                    titre: "Bienvenue au syst√®me",
                    contenu: "Bienvenue dans le syst√®me de gestion scolaire",
                    destinataires: ["Tous"],
                    dateEnvoi: new Date().toISOString(),
                    type: "Information",
                    statut: "Envoy√©e",
                    dateCreation: new Date().toISOString(),
                    createdBy: "U001"
                }
            ];

            for (const notif of notifications) {
                await db.collection('notifications').doc(notif.id).set(notif);
            }
        }

        // ==================== 21. DOCUMENTS ADMINISTRATIFS ====================
        async function createDocuments() {
            const documents = [
                {
                    id: "DOC001",
                    titre: "R√®glement int√©rieur",
                    type: "Document administratif",
                    description: "R√®glement int√©rieur de l'√©tablissement",
                    chemin: "/documents/reglement-interieur.pdf",
                    public: "Tous",
                    dateCreation: new Date().toISOString(),
                    createdBy: "U001"
                }
            ];

            for (const doc of documents) {
                await db.collection('documents').doc(doc.id).set(doc);
            }
        }

        // ==================== 22. SYST√àME DISCIPLINAIRE ====================
        async function createSystemeDisciplinaire() {
            const reglement = {
                id: "REGLEMENT",
                titre: "Syst√®me de sanctions disciplinaires",
                sanctions: [
                    { niveau: "Punition", types: ["P1", "P2", "P3"] },
                    { niveau: "Mise en Garde", types: ["MG"] },
                    { niveau: "Avertissement", types: ["A1", "A2", "A3"] },
                    { niveau: "Bl√¢me", types: ["B"] },
                    { niveau: "Mesure √âducative", types: ["ME"] },
                    { niveau: "Mesure d'Accompagnement", types: ["MA"] },
                    { niveau: "Renvoi D√©finitif", types: ["RD"], conditions: "2 MA = Renvoi d√©finitif" }
                ],
                dateCreation: new Date().toISOString()
            };
            await db.collection('reglement_disciplinaire').doc(reglement.id).set(reglement);
        }

                // ==================== 23. CONVOCATIONS PARENTS ====================
        async function createConvocations() {
            const convocations = [
                {
                    id: "CONV001",
                    eleveId: "E004",
                    tuteurId: "T007",
                    motif: "Retards r√©p√©t√©s",
                    dateConvoc: "2024-09-20",
                    heureConvoc: "14:00",
                    lieu: "Bureau du Directeur de Discipline",
                    statut: "En attente",
                    notes: "L'√©l√®ve a accumul√© 5 retards ce mois-ci",
                    dateCreation: new Date().toISOString(),
                    createdBy: "U003"
                },
                {
                    id: "CONV002",
                    eleveId: "E007", 
                    tuteurId: "T014",
                    motif: "Baisse des r√©sultats scolaires",
                    dateConvoc: "2024-09-25",
                    heureConvoc: "15:30",
                    lieu: "Bureau du Directeur des √âtudes",
                    statut: "Confirm√©e",
                    notes: "Moyenne g√©n√©rale pass√©e de 14 √† 9.5",
                    dateCreation: new Date().toISOString(),
                    createdBy: "U002"
                },
                {
                    id: "CONV003",
                    eleveId: "E002",
                    tuteurId: "T003",
                    motif: "Comportement en classe",
                    dateConvoc: "2024-09-18",
                    heureConvoc: "10:00", 
                    lieu: "Salle des professeurs",
                    statut: "Effectu√©e",
                    notes: "Entretien positif, engagement de l'√©l√®ve",
                    compteRendu: "L'√©l√®ve s'est engag√© √† am√©liorer son comportement",
                    dateCreation: new Date().toISOString(),
                    createdBy: "U005"
                }
            ];

            for (const convocation of convocations) {
                await db.collection('convocations').doc(convocation.id).set(convocation);
            }
        }

        // ==================== 24. RAPPORTS ET STATISTIQUES ====================
        async function createRapports() {
            const rapports = [
                {
                    id: "RAPP001",
                    titre: "Rapport de rentr√©e scolaire 2024-2025",
                    type: "Administratif",
                    auteur: "U001",
                    periode: "Septembre 2024",
                    contenu: {
                        effectifs: {
                            totalEleves: 15,
                            nouveauxEleves: 5,
                            parNiveau: { "N1": 6, "N2": 4, "N3": 3, "N4": 2 }
                        },
                        personnel: {
                            totalEnseignants: 8,
                            totalAdministratif: 5
                        },
                        observations: "Rentr√©e scolaire r√©ussie avec un taux de pr√©sence de 98%"
                    },
                    statut: "Finalis√©",
                    dateCreation: new Date().toISOString(),
                    dateModification: new Date().toISOString()
                },
                {
                    id: "RAPP002",
                    titre: "Rapport financier trimestriel",
                    type: "Financier", 
                    auteur: "U004",
                    periode: "Trimestre 1 - 2024",
                    contenu: {
                        recettes: {
                            fraisScolarite: 7500,
                            fraisInscription: 1500,
                            total: 9000
                        },
                        depenses: {
                            salaires: 8500,
                            fonctionnement: 1200,
                            maintenance: 800,
                            total: 10500
                        },
                        solde: -1500,
                        observations: "D√©ficit temporaire d√ª aux investissements de d√©but d'ann√©e"
                    },
                    statut: "En attente validation",
                    dateCreation: new Date().toISOString(),
                    dateModification: new Date().toISOString()
                },
                {
                    id: "RAPP003",
                    titre: "Rapport disciplinaire mensuel",
                    type: "Disciplinaire",
                    auteur: "U003",
                    periode: "Septembre 2024",
                    contenu: {
                        incidents: {
                            total: 8,
                            parType: {
                                retards: 5,
                                absences: 2,
                                comportement: 1
                            },
                            sanctions: {
                                avertissements: 3,
                                retenues: 2,
                                convocations: 3
                            }
                        },
                        observations: "Situation globale satisfaisante, vigilance sur les retards"
                    },
                    statut: "Finalis√©",
                    dateCreation: new Date().toISOString(),
                    dateModification: new Date().toISOString()
                },
                {
                    id: "RAPP004",
                    titre: "Rapport p√©dagogique - Premi√®res √©valuations",
                    type: "P√©dagogique",
                    auteur: "U002",
                    periode: "Trimestre 1 - 2024",
                    contenu: {
                        evaluations: {
                            totalNotes: 120,
                            moyenneGenerale: 13.2,
                            meilleureMoyenne: 16.5,
                            plusBasseMoyenne: 8.7
                        },
                        parMatiere: {
                            "Math√©matiques": 14.2,
                            "Fran√ßais": 12.8,
                            "Physique-Chimie": 13.5,
                            "Sciences": 12.1
                        },
                        observations: "Bons r√©sultats globaux, renforcement n√©cessaire en sciences"
                    },
                    statut: "Finalis√©",
                    dateCreation: new Date().toISOString(),
                    dateModification: new Date().toISOString()
                }
            ];

            for (const rapport of rapports) {
                await db.collection('rapports').doc(rapport.id).set(rapport);
            }
        }
    </script>
</body>
</html>
